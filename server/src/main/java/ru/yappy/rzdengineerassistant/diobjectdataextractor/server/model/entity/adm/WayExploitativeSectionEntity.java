package ru.yappy.rzdengineerassistant.diobjectdataextractor.server.model.entity.adm;

import lombok.*;
import jakarta.persistence.*;

import java.util.Set;

/** Класс, описывающий сущности эксплуатационных участков дистанций пути в базе данных. */
@Data
@Entity
@Table(name = "p_exploitative_sections", schema = "adm")
public class WayExploitativeSectionEntity {
    /** Идентификатор эксплуатационного участка, первичный ключ в БД (тип данных - SMALLINT). */
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "p_exploitative_section_id")
    private Long id;
    /** Номер эксплуатационного участка (тип данных в БД - SMALLINT). */
    @Column(name = "p_exploitative_section_number")
    private Integer number;
    /** Поле для связи с таблицей сущностей дистанций пути. */
    @EqualsAndHashCode.Exclude
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "p_distance_id")
    private WayMaintenanceDistanceEntity wayMaintenanceDistance;
    /** Поле для связи с таблицей сущностей линейных участков дистанций пути. */
    @EqualsAndHashCode.Exclude
    @OneToMany(mappedBy = "wayExploitativeSection")
    private Set<WayLinearSectionEntity> wayLinearSections;

    /** Метод, возвращающий строковое представление сущности эксплуатационного участка с отсылкой к дистанции пути
     *
     * @return строка вида "ПЧ-(номер) (название) ПЧУ-(номер)", например "ПЧ-1 Кое-гденькская ПЧУ-1"
    */
    @Override
    public String toString() {
        return (wayMaintenanceDistance == null) ? "ПЧУ-" + number : wayMaintenanceDistance + " ПЧУ-" + number;
    }

}